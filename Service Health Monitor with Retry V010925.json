{
  "name": "Service Health Monitor with Retry V010925",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 9
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        0,
        -192
      ],
      "id": "2a8de1f3-4823-47e4-a1c9-e5210bad1788",
      "name": "Check Interval"
    },
    {
      "parameters": {
        "url": "https://httpbin.org/status/400",
        "options": {
          "response": {
            "response": {
              "fullResponse": true,
              "neverError": true
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        176,
        -192
      ],
      "id": "5b0eb832-e1c3-4270-a891-8db5b07def07",
      "name": "First Check",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f6ccb555-8951-40a1-bc0f-918731354227",
              "leftValue": "={{ $json[\"statusCode\"] }}",
              "rightValue": 400,
              "operator": {
                "type": "number",
                "operation": "lte"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        352,
        -192
      ],
      "id": "6613ec70-0e0b-40b3-85fa-161d2bb2d870",
      "name": "Check Status"
    },
    {
      "parameters": {
        "amount": 30
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        608,
        -288
      ],
      "id": "35dbf021-4513-4557-a6d5-d99a460bc988",
      "name": "Recheck Delay",
      "webhookId": "4d07628f-2f2a-4039-81ae-e45d78982c80"
    },
    {
      "parameters": {
        "url": "https://httpbin.org/status/400",
        "options": {
          "response": {
            "response": {
              "fullResponse": true,
              "neverError": true
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        784,
        -288
      ],
      "id": "5c80525f-87fa-44e2-9368-16bc7200b5a5",
      "name": "Second Check",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f6ccb555-8951-40a1-bc0f-918731354227",
              "leftValue": "={{ $json[\"statusCode\"] }}",
              "rightValue": 400,
              "operator": {
                "type": "number",
                "operation": "lte"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        960,
        -288
      ],
      "id": "c76666d2-9cf1-4e62-86e4-6c22ec562716",
      "name": "Confirm Failure"
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "ID",
          "mode": "id"
        },
        "text": "=ðŸš¨ URGENT: Service check failed twice in a row!   \n Status: {{$json[\"statusCode\"]}}\n Message: {{$json[\"statusMessage\"]}}  \n Time: {{$json[\"headers\"][\"date\"]}}",
        "otherOptions": {
          "includeLinkToWorkflow": false
        }
      },
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.3,
      "position": [
        1168,
        -368
      ],
      "id": "792f2a3b-32b0-4b9e-b057-0b93cece27b6",
      "name": "Send Alert to Slack",
      "webhookId": "738bd1c5-e87d-4dd4-951e-8485c5cb01ac",
      "credentials": {
        "slackApi": {
          "id": "XuUwy2Lth9glqHbY",
          "name": "Slack Test"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Check Interval": {
      "main": [
        [
          {
            "node": "First Check",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "First Check": {
      "main": [
        [
          {
            "node": "Check Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Status": {
      "main": [
        [
          {
            "node": "Recheck Delay",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Recheck Delay": {
      "main": [
        [
          {
            "node": "Second Check",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Second Check": {
      "main": [
        [
          {
            "node": "Confirm Failure",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Confirm Failure": {
      "main": [
        [
          {
            "node": "Send Alert to Slack",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "56f79e69-60c7-47e8-882c-9f3ea247528f",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "4655497243705f66b47991d9dbe9a9222e8444b5c2782e466f572ff93867cb4c"
  },
  "id": "ADc81sc252y5DJQo",
  "tags": [
    {
      "createdAt": "2025-09-01T17:36:33.786Z",
      "updatedAt": "2025-09-01T17:36:33.786Z",
      "id": "2BC0mR6o9mZfw0Ry",
      "name": "uptime"
    },
    {
      "createdAt": "2025-09-01T17:36:27.812Z",
      "updatedAt": "2025-09-01T17:36:27.812Z",
      "id": "5slqRjZCJR1hy0fc",
      "name": "monitoring"
    },
    {
      "createdAt": "2025-08-23T19:10:40.177Z",
      "updatedAt": "2025-08-23T19:10:40.177Z",
      "id": "7ASMGI4lVr4Eo8rL",
      "name": "tuguidragos.com"
    },
    {
      "createdAt": "2025-09-01T16:14:22.027Z",
      "updatedAt": "2025-09-01T16:14:22.027Z",
      "id": "KBQZBD4R6LVuuFK2",
      "name": "slack-alerts"
    },
    {
      "createdAt": "2025-08-31T21:12:32.130Z",
      "updatedAt": "2025-08-31T21:12:32.130Z",
      "id": "NtEM4qJBPpIvfcPu",
      "name": "automation"
    },
    {
      "createdAt": "2025-09-01T17:36:40.590Z",
      "updatedAt": "2025-09-01T17:36:40.590Z",
      "id": "vvwl4Tq3LGKxOPea",
      "name": "error-handling"
    }
  ]
}