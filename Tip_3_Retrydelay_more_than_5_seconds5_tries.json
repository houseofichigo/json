{
  "id": "2OIJjgh9dop5IF6f",
  "meta": {
    "instanceId": "8981479cb588889c05b145eaed421551d37a4fff11ab279d3f4744a6577c6002"
  },
  "name": "Tip #3: Retry/delay more than 5 seconds/5 tries",
  "tags": [],
  "nodes": [
    {
      "id": "885f5632-f4f1-4efd-a5a6-b5d39a180f86",
      "name": "When clicking ‘Execute workflow’",
      "type": "n8n-nodes-base.manualTrigger",
      "position": [
        0,
        45
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "c4ccc06f-0cb7-4aac-a195-dc8b6dae87e5",
      "name": "HTTP Request",
      "type": "n8n-nodes-base.httpRequest",
      "onError": "continueErrorOutput",
      "maxTries": 5,
      "position": [
        440,
        45
      ],
      "parameters": {
        "url": "https://example.com/1",
        "options": {}
      },
      "retryOnFail": false,
      "typeVersion": 4.2,
      "waitBetweenTries": 5000
    },
    {
      "id": "4be525c2-5b5c-4d1a-b7f0-363faa63d522",
      "name": "Set Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        220,
        45
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "509eb34a-731a-42cb-82d8-8b8172e35719",
              "name": "delay_seconds",
              "type": "number",
              "value": 30
            },
            {
              "id": "3c241ef0-eb4e-4c92-93c6-696949db1170",
              "name": "max_tries",
              "type": "string",
              "value": "6"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "6280a197-72bb-4cc2-8530-b4cc922180f1",
      "name": "Edit Fields",
      "type": "n8n-nodes-base.set",
      "position": [
        660,
        -30
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "1edaa212-dd5e-4368-9394-97e18ff19578",
              "name": "delay_seconds",
              "type": "string",
              "value": "={{ $json.delay_seconds }}"
            },
            {
              "id": "fa20c333-5d70-4cb4-9403-3c0c8633512d",
              "name": "max_tries",
              "type": "number",
              "value": "={{ $json.max_tries - 1 }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "3273bc42-46e6-4d26-9f1b-c3cf456f27eb",
      "name": "If",
      "type": "n8n-nodes-base.if",
      "position": [
        880,
        -30
      ],
      "parameters": {
        "options": {},
        "conditions": {
          "options": {
            "version": 2,
            "leftValue": "",
            "caseSensitive": true,
            "typeValidation": "strict"
          },
          "combinator": "and",
          "conditions": [
            {
              "id": "43ba9e9c-70ce-4a6d-93cb-c39984911994",
              "operator": {
                "type": "number",
                "operation": "lte"
              },
              "leftValue": "={{ $json.max_tries }}",
              "rightValue": 0
            }
          ]
        }
      },
      "typeVersion": 2.2
    },
    {
      "id": "62460f30-3329-4392-919e-09da442a0bbd",
      "name": "Stop and Error",
      "type": "n8n-nodes-base.stopAndError",
      "position": [
        1100,
        -80
      ],
      "parameters": {
        "errorMessage": "=Service unavailable after {{ $('Set Fields').item.json.max_tries }} tries"
      },
      "typeVersion": 1
    },
    {
      "id": "3c918a29-2b14-42e7-9e97-9cd92bc62a79",
      "name": "Wait",
      "type": "n8n-nodes-base.wait",
      "position": [
        1100,
        145
      ],
      "webhookId": "4fb44836-a76d-4886-a7c3-993bdc49b7f5",
      "parameters": {
        "amount": "={{ $json.delay_seconds }}"
      },
      "typeVersion": 1.1
    },
    {
      "id": "3ddbc2a4-519c-4623-9098-312b1f14c9af",
      "name": "Sticky Note",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        -200
      ],
      "parameters": {
        "width": 360,
        "height": 180,
        "content": "## Tip #3: Retry/delay more than 5 seconds/5 tries\nThis is the template with example of how you can implement retry/delay custom approach with more than 5 seconds/5 tries in n8n.\nMore details in my [N8n Tips blog](https://n8n-tips.blogspot.com/2025/06/tip-3-retrydelay-more-than-5-seconds5.html)"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "85e44a66-f18e-43cf-a9fa-e2486f6a76b8",
  "connections": {
    "If": {
      "main": [
        [
          {
            "node": "Stop and Error",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set Fields": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [],
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking ‘Execute workflow’": {
      "main": [
        [
          {
            "node": "Set Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}