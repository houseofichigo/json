{
  "id": "vfk3hMIpK3VPTTuT",
  "meta": {
    "instanceId": "0a7ae129a7d703150135f6cc24d0469f20ffd22b5ed59c23ee3e0608264e6d98",
    "templateCredsSetupCompleted": true
  },
  "name": "Extract Receipt using VLM Run copy",
  "tags": [
    {
      "id": "DSKBDwtewArNjZx4",
      "name": "vlm-run",
      "createdAt": "2024-09-20T20:26:05.335Z",
      "updatedAt": "2024-09-20T20:26:05.335Z"
    },
    {
      "id": "uTgcE1NFbi2QAwzR",
      "name": "Expense Management",
      "createdAt": "2025-06-18T16:03:15.024Z",
      "updatedAt": "2025-06-18T16:03:15.024Z"
    },
    {
      "id": "ASVb4TB6jxrNFOUQ",
      "name": "Finance Automation",
      "createdAt": "2025-06-18T16:03:26.652Z",
      "updatedAt": "2025-06-18T16:03:26.652Z"
    },
    {
      "id": "2Ng8DrDYZnO5sfgp",
      "name": "Receipt Processing",
      "createdAt": "2025-06-18T16:03:34.870Z",
      "updatedAt": "2025-06-18T16:03:34.870Z"
    },
    {
      "id": "70j7DkEvdoMovcLY",
      "name": "VLM",
      "createdAt": "2025-06-18T16:03:39.271Z",
      "updatedAt": "2025-06-18T16:03:39.271Z"
    }
  ],
  "nodes": [
    {
      "id": "d6f247e6-7a83-485f-90e4-b9b20e5771bf",
      "name": "üßæ Workflow Overview",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        400,
        140
      ],
      "parameters": {
        "color": 7,
        "width": 400,
        "height": 680,
        "content": "## üßæ AI Receipt Data Extraction Workflow\n\n**Overview:**\nAutomates receipt processing for expense management. Upload receipts to Google Drive ‚Üí VLM Run extracts data ‚Üí Saves to spreadsheet.\n\n**Key Features:**\n- üìÅ Auto-monitors Google Drive folder\n- ü§ñ Extracts merchant, amount, date, currency\n- üìä Saves structured data to Google Sheets\n- üì± Mobile-friendly uploads\n\n**Perfect for:**\n- Business expense reporting\n- Personal finance tracking\n- Accounting automation\n- Travel expenses\n\n**Requirements:**\n- VLM Run API\n- Google Drive & Sheets OAuth2"
      },
      "typeVersion": 1
    },
    {
      "id": "a2726bd4-a23e-49de-b980-ad55531ce5c8",
      "name": "üìÅ Input Processing Documentation",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        820,
        140
      ],
      "parameters": {
        "color": 7,
        "width": 400,
        "height": 680,
        "content": "## üìÅ Input Processing\n\n**Monitors & downloads receipt files from Google Drive.**\n\n**Process:**\n1. Watches designated Drive folder\n2. Auto-triggers on new uploads\n3. Downloads files for AI processing\n\n**Supported Formats:**\n- Images (JPG, PNG, WEBP)\n- PDF documents\n- Mobile camera uploads\n- Scanned receipts"
      },
      "typeVersion": 1
    },
    {
      "id": "b6bbc513-a0cd-4656-91ea-ecd9f9c712aa",
      "name": "ü§ñ AI Extraction Documentation",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1240,
        140
      ],
      "parameters": {
        "width": 400,
        "height": 680,
        "content": "## ü§ñ VLM Run Receipt Extraction\n\n**Uses VLM Run node to extract structured data from receipt images/PDFs.**\n\n**Extracts:**\n- Merchant name\n- Customer info\n- Total amount\n- Currency\n- Transaction date\n\n**Features:**\n- Handles poor quality images\n- Various receipt formats\n- OCR text recognition"
      },
      "typeVersion": 1
    },
    {
      "id": "9424db8a-1b60-4cde-83e4-205b1b8e61a8",
      "name": "üìä Storage Documentation",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1660,
        140
      ],
      "parameters": {
        "color": 7,
        "width": 420,
        "height": 680,
        "content": "## üìä Data Storage\n\n**Structures and stores extracted data in Google Sheets.**\n\n**Features:**\n- Clean, organized format\n- Centralized expense database\n- Auto-appends new entries\n- Analysis-ready data\n\n**Data Fields:**\n- Customer name\n- Merchant name\n- Amount & currency\n- Transaction date\n\n**Benefits:**\n- Real-time tracking\n- Easy exports\n- Mobile access"
      },
      "typeVersion": 1
    },
    {
      "id": "5b7f6bad-f405-4dac-8615-52f429ea4477",
      "name": "Monitor Receipt Uploads",
      "type": "n8n-nodes-base.googleDriveTrigger",
      "notes": "Monitors Google Drive folder for new receipt uploads and triggers processing automatically.",
      "position": [
        880,
        620
      ],
      "parameters": {
        "event": "fileCreated",
        "options": {},
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "mode": "list",
          "value": "1reWORwI1tMa-eGB75NCXq9eRw4CiQIhX",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1reWORwI1tMa-eGB75NCXq9eRw4CiQIhX",
          "cachedResultName": "n8n"
        }
      },
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "RoAWJpYkuErAB6eo",
          "name": "n8n - Google Drive account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "d8bc3603-c454-4095-8334-d8a87bd44472",
      "name": "Download  Receipt File",
      "type": "n8n-nodes-base.googleDrive",
      "notes": "Downloads receipt files from Google Drive for AI processing.",
      "position": [
        1080,
        620
      ],
      "parameters": {
        "fileId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $json.id }}"
        },
        "options": {
          "binaryPropertyName": "data"
        },
        "operation": "download"
      },
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "RoAWJpYkuErAB6eo",
          "name": "n8n - Google Drive account"
        }
      },
      "typeVersion": 3
    },
    {
      "id": "082c9002-59ba-41d2-b1e4-b3f0bf5a565f",
      "name": "VLM Run Receipt Parser",
      "type": "@vlm-run/n8n-nodes-vlmrun.vlmRun",
      "notes": "Uses VLM AI to extract merchant name, amount, currency, and date from receipt images.",
      "position": [
        1400,
        620
      ],
      "parameters": {
        "domain": "document.receipt"
      },
      "credentials": {
        "vlmRunApi": {
          "id": "YOpUDKYZ0pZumyyO",
          "name": "n8n - VLM Run account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "1ea57ced-38c2-48e8-96ae-b733fc059f44",
      "name": "Format Receipt Data",
      "type": "n8n-nodes-base.set",
      "notes": "Transforms AI-extracted receipt data into clean, structured format for spreadsheet storage.",
      "position": [
        1720,
        620
      ],
      "parameters": {
        "values": {
          "string": [
            {
              "name": "Customer",
              "value": "={{ $json.response.customer_name }}"
            },
            {
              "name": "Merchant",
              "value": "={{ $json.response.merchant_name }}"
            },
            {
              "name": "Amount",
              "value": "={{ $json.response.total }}"
            },
            {
              "name": "Currency",
              "value": "={{ $json.response.currency }}"
            },
            {
              "name": "Date",
              "value": "={{ $json.response.transaction_date }}"
            }
          ]
        },
        "options": {},
        "keepOnlySet": true
      },
      "typeVersion": 1
    },
    {
      "id": "b36dea02-0a86-4e78-839d-daae319aaaff",
      "name": "Save to Expense Database",
      "type": "n8n-nodes-base.googleSheets",
      "notes": "Automatically saves extracted receipt data to Google Sheets for expense tracking.",
      "position": [
        1900,
        620
      ],
      "parameters": {
        "columns": {
          "value": {
            "Date": "={{ $json.Date }}",
            "Amount": "={{ $json.Amount }}",
            "Currency": "={{ $json.Currency }}",
            "Customer": "={{ $json.Customer }}",
            "Merchant": "={{ $json.Merchant }}"
          },
          "schema": [
            {
              "id": "Customer",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Customer",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Merchant",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Merchant",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Amount",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Amount",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Currency",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Currency",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Date",
              "type": "string",
              "display": true,
              "removed": false,
              "required": false,
              "displayName": "Date",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "Customer"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {},
        "operation": "append",
        "sheetName": {
          "__rl": true,
          "mode": "list",
          "value": "gid=0",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/11_VjMdhv_JN2eSRZiw_t0dIN-yShkn2jlCDwiG8eb14/edit#gid=0",
          "cachedResultName": "Sheet1"
        },
        "documentId": {
          "__rl": true,
          "mode": "list",
          "value": "11_VjMdhv_JN2eSRZiw_t0dIN-yShkn2jlCDwiG8eb14",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/11_VjMdhv_JN2eSRZiw_t0dIN-yShkn2jlCDwiG8eb14/edit?usp=drivesdk",
          "cachedResultName": "Receipt Data"
        }
      },
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "ZjcHQereIQBGqp7Z",
          "name": "n8n - Google Sheets account"
        }
      },
      "typeVersion": 4.6
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "e5449041-5940-4a1e-a337-e75f34d86e9e",
  "connections": {
    "Format Receipt Data": {
      "main": [
        [
          {
            "node": "Save to Expense Database",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download  Receipt File": {
      "main": [
        [
          {
            "node": "VLM Run Receipt Parser",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "VLM Run Receipt Parser": {
      "main": [
        [
          {
            "node": "Format Receipt Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Monitor Receipt Uploads": {
      "main": [
        [
          {
            "node": "Download  Receipt File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}